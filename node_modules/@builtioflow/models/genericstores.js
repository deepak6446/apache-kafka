const mongoose = require('mongoose')
const crypto = require('crypto')
const Schema = mongoose.Schema


const GenericStoreSchema = new Schema({
  user_uid: { type: String },
  key: { type: String },
  value: { type: String },
  uid: { type: String },
  created_at: { type: Date, default: Date.now }
})

GenericStoreSchema.pre('save', function (next) {
  var self = this
  var id = 'gs' + crypto.randomBytes(16).toString('hex')
  self.uid = id
  next()
})


mongoose.model('GenericStore', GenericStoreSchema)
module.exports = ['GenericStore', GenericStoreSchema]