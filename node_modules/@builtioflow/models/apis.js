const mongoose = require('mongoose')
const crypto = require('crypto')
const Schema = mongoose.Schema
// route, method , flow, title , description
const ApiSchema = new Schema({
    uid: { type: String },
    title: { type: String },
    description: { type: String },
    route: { type: String },
    method: { type: String, default: 'GET' },
    flow_uid: { type: String }
})

ApiSchema.pre('save', function (next) {
    var self = this
    var id = 'api' + crypto.randomBytes(18).toString('hex')
    self.uid = id
    next()
})


mongoose.model('Api', ApiSchema)
module.exports = ['Api', ApiSchema]