const mongoose = require('mongoose')
const crypto = require('crypto')
const Schema = mongoose.Schema

const ResponseSchema = new Schema({
  uid: { type: String },
  created_at: { type: Date, default: Date.now, expires: 3600 },
  data: { type: mongoose.Schema.Types.Mixed }
})

ResponseSchema.pre('save', function (next) {
  var id = 'res' + crypto.randomBytes(18).toString('hex')
  this.uid = id
  next()
});

mongoose.model('Response', ResponseSchema)
module.exports = ['Response', ResponseSchema]