const mongoose = require('mongoose')
const crypto = require('crypto')
const Schema = mongoose.Schema


const ASchema = new Schema({
    user_uid: { type: String },
    key: { type: String },
    value: { type: String },
    uid: { type: String },
    created_at: { type: Date, default: Date.now }
});

ASchema.pre('save', function (next) {
    var self = this
    var id = 'as' + crypto.randomBytes(18).toString('hex')
    self.uid = id
    next()
})

mongoose.model('AStore', ASchema)
module.exports = ['AStore', ASchema]