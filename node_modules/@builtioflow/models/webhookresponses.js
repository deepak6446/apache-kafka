const mongoose = require('mongoose')
const crypto = require('crypto')
const Schema = mongoose.Schema


const WebhookResponseSchema = new Schema({
  uid: { type: String },
  created_at: { type: Date, default: Date.now },
  body: { type: Schema.Types.Mixed },
  status: { type: Number, default: 200 },
  headers: { type: Schema.Types.Mixed },
  flow_uid: { type: String }

})

WebhookResponseSchema.pre('save', function (next) {
  var id = 'wbr' + crypto.randomBytes(18).toString('hex')
  this.uid = id
  next()
})


mongoose.model('WebhookResponse', WebhookResponseSchema)
module.exports = ['WebhookResponse', WebhookResponseSchema]