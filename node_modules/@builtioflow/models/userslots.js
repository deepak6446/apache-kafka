const mongoose = require('mongoose')
const crypto = require('crypto')
const Schema = mongoose.Schema

const UserSlot = new Schema({
    user_uid: { type: String },
    enqueue: { type: Number, default: 0 },
    created_at: { type: Date, default: Date.now },
    updated_at: { type: Date, default: Date.now },
    adjusted_at: { type: Date, default: Date.now }
});

UserSlot.pre('save', function (next) {
    if (!this || !this.uid) {
        this.uid = 'usl' + crypto.randomBytes(18).toString('hex')
    }
    next()
})


mongoose.model('UserSlot', UserSlot)
module.exports = ['UserSlot', UserSlot]